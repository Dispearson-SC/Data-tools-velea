server {
    listen 80;

    location / {
        root /usr/share/nginx/html;
        index index.html index.htm;
        try_files $uri $uri/ /index.html;
    }

    # Proxy API requests to backend
    location /api/ {
        # Assuming backend service name is 'backend' in docker-compose
        # Rewrite /api/foo to /foo if backend expects /foo, 
        # BUT current frontend calls base URL directly.
        # Ideally frontend uses VITE_API_URL.
        # If we serve frontend from same domain, we might need proxy.
        # But if we use separate ports/domains, this is optional.
        # For simplicity in Dockploy, usually we expose port 80 for front
        # and port 8000 for back separately, OR use a reverse proxy.
        # Let's assume standard SPA routing support is enough here.
    }
    
    error_page 500 502 503 504 /50x.html;
    location = /50x.html {
        root /usr/share/nginx/html;
    }
}
